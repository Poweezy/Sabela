// Events Calendar Functionality
const EventsCalendar = {
    events: [
        {
            id: 1,
            title: "Climate-Smart Agriculture Training",
            date: "2024-11-15",
            time: "9:00 AM - 4:00 PM",
            location: "Mbabane Community Center",
            type: "Workshop",
            spots: 50,
            registered: 23
        },
        {
            id: 2,
            title: "Tree Planting Drive",
            date: "2024-11-22",
            time: "8:00 AM - 12:00 PM",
            location: "Lubombo Mountains",
            type: "Campaign",
            spots: 100,
            registered: 67
        }
    ],

    init() {
        this.bindEventHandlers();
        this.updateEventCards();
    },

    bindEventHandlers() {
        document.querySelectorAll('.event-register').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const eventCard = e.target.closest('.event-card');
                const eventTitle = eventCard.querySelector('h3').textContent;
                
                if (typeof trackEvent !== 'undefined') {
                    trackEvent('register', 'event', eventTitle);
                }
                
                alert(`Registration for "${eventTitle}" - Feature coming soon!`);
            });
        });
    },

    updateEventCards() {
        const eventCards = document.querySelectorAll('.event-card');
        eventCards.forEach((card, index) => {
            if (this.events[index]) {
                const event = this.events[index];
                const spotsLeft = event.spots - event.registered;
                const spotsElement = card.querySelector('.event-details span:last-child');
                if (spotsElement) {
                    spotsElement.innerHTML = `<i data-lucide="users"></i> ${spotsLeft} spots available`;
                }
            }
        });
    }
};

document.addEventListener('DOMContentLoaded', () => {
    EventsCalendar.init();
});