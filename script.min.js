!function(){"use strict";function e(e){const t=document.querySelector(e);if(t){const e=document.querySelector(".header").offsetHeight,n=t.offsetTop-e;window.scrollTo({top:n,behavior:"smooth"})}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("i[data-lucide]").forEach(e=>{e.setAttribute("aria-hidden","true")});try{lucide.createIcons()}catch(e){console.warn("Lucide icons failed to load:",e),document.querySelectorAll("[data-lucide]").forEach(e=>{const t=e.getAttribute("data-lucide");e.innerHTML=`[${t}]`})}!function(){const e=document.getElementById("mobileMenuBtn"),t=document.getElementById("navLinks"),n=t?t.querySelectorAll(".nav-link"):[];if(e&&t){function i(){const i=t.classList.toggle("active");e.setAttribute("aria-expanded",i);const o=e.querySelector("i");i?(o.setAttribute("data-lucide","x"),e.setAttribute("aria-label","Close menu"),n.length>0&&n[0].focus()):(o.setAttribute("data-lucide","menu"),e.setAttribute("aria-label","Open menu"),e.focus()),lucide.createIcons()}e.addEventListener("click",i),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),i())}),t.addEventListener("click",function(n){if(n.target.classList.contains("nav-link")){t.classList.remove("active");e.querySelector("i").setAttribute("data-lucide","menu"),e.setAttribute("aria-label","Open menu"),e.setAttribute("aria-expanded","false"),lucide.createIcons(),e.focus()}}),t.addEventListener("keydown",function(i){const o=Array.from(n).indexOf(document.activeElement);switch(i.key){case"ArrowDown":i.preventDefault();const a=(o+1)%n.length;n[a].focus();break;case"ArrowUp":i.preventDefault();const s=o<=0?n.length-1:o-1;n[s].focus();break;case"Escape":i.preventDefault(),t.classList.remove("active");e.querySelector("i").setAttribute("data-lucide","menu"),e.setAttribute("aria-label","Open menu"),e.setAttribute("aria-expanded","false"),lucide.createIcons(),e.focus();break;case"Tab":if(!t.contains(i.target)){t.classList.remove("active");e.querySelector("i").setAttribute("data-lucide","menu"),e.setAttribute("aria-label","Open menu"),e.setAttribute("aria-expanded","false"),lucide.createIcons()}}}),document.addEventListener("click",function(n){if(!e.contains(n.target)&&!t.contains(n.target)&&t.classList.contains("active")){t.classList.remove("active");e.querySelector("i").setAttribute("data-lucide","menu"),e.setAttribute("aria-label","Open menu"),e.setAttribute("aria-expanded","false"),lucide.createIcons()}})}}(),document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),e(this.getAttribute("href"))})}),function(){const e=document.querySelectorAll(".section"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){e.target.classList.add("visible");e.target.querySelectorAll("[data-animation-delay]").forEach(e=>{const t=e.dataset.animationDelay;t&&(e.style.transitionDelay=t),e.classList.add("visible")}),t.unobserve(e.target)}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>{t.observe(e)})}(),function(){const e=document.querySelectorAll("[data-count]"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(!function(e){const t=parseInt(e.getAttribute("data-count")),n=60,i=t/n;let o=0;const a=setInterval(()=>{o+=i,o>=t?(e.textContent=t.toLocaleString()+"+",clearInterval(a)):e.textContent=Math.floor(o).toLocaleString()+"+"},2e3/n)}(e.target),t.unobserve(e.target))})},{threshold:.5});e.forEach(e=>{t.observe(e)})}(),function(){const e=document.getElementById("weatherGrid"),t=document.getElementById("lastUpdated");if(!e||!t)return;const n=[{name:"Hhohho Region",lat:-26.3167,lon:31.1333},{name:"Lubombo Region",lat:-26.45,lon:31.95},{name:"Manzini Region",lat:-26.4833,lon:31.3667},{name:"Shiselweni Region",lat:-27.1167,lon:31.2}];async function i(e,t){const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,relative_humidity_2m,weather_code,visibility,wind_speed_10m&hourly=temperature_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max`;try{const e=await fetch(n);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching weather data:",e),null}}function o(){e.innerHTML="";for(let t=0;t<n.length;t++){const t=document.createElement("div");t.className="weather-card skeleton",t.innerHTML='\n                <div class="skeleton-box image"></div>\n                <div class="skeleton-box title"></div>\n                <div class="skeleton-box icon"></div>\n                <div class="skeleton-box temp"></div>\n                <div class="skeleton-box condition"></div>\n                <div class="skeleton-box detail"></div>\n            ',e.appendChild(t)}}async function a(){c(),o();const e=n.map(e=>i(e.lat,e.lon));l(await Promise.all(e))}function s(e){return{0:{condition:"Clear sky",icon:"sun"},1:{condition:"Mainly clear",icon:"sun"},2:{condition:"Partly cloudy",icon:"cloud"},3:{condition:"Overcast",icon:"cloud"},45:{condition:"Fog",icon:"cloud"},48:{condition:"Depositing rime fog",icon:"cloud"},51:{condition:"Light drizzle",icon:"cloud-drizzle"},53:{condition:"Moderate drizzle",icon:"cloud-drizzle"},55:{condition:"Dense drizzle",icon:"cloud-drizzle"},56:{condition:"Light freezing drizzle",icon:"cloud-drizzle"},57:{condition:"Dense freezing drizzle",icon:"cloud-drizzle"},61:{condition:"Slight rain",icon:"cloud-rain"},63:{condition:"Moderate rain",icon:"cloud-rain"},65:{condition:"Heavy rain",icon:"cloud-rain"},66:{condition:"Light freezing rain",icon:"cloud-rain"},67:{condition:"Heavy freezing rain",icon:"cloud-rain"},71:{condition:"Slight snow fall",icon:"cloud-snow"},73:{condition:"Moderate snow fall",icon:"cloud-snow"},75:{condition:"Heavy snow fall",icon:"cloud-snow"},77:{condition:"Snow grains",icon:"cloud-snow"},80:{condition:"Slight rain showers",icon:"cloud-rain"},81:{condition:"Moderate rain showers",icon:"cloud-rain"},82:{condition:"Violent rain showers",icon:"cloud-rain"},85:{condition:"Slight snow showers",icon:"cloud-snow"},86:{condition:"Heavy snow showers",icon:"cloud-snow"},95:{condition:"Thunderstorm",icon:"cloud-lightning"},96:{condition:"Thunderstorm with hail",icon:"cloud-lightning"},99:{condition:"Thunderstorm with heavy hail",icon:"cloud-lightning"}}[e]||{condition:"Cloudy",icon:"cloud"}}function r(e){const t={"Clear sky":"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Mainly clear":"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Partly cloudy":"https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",Overcast:"https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",Fog:"https://images.unsplash.com/photo-1487621167305-5d248087c724?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Depositing rime fog":"https://images.unsplash.com/photo-1487621167305-5d248087c724?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Light drizzle":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Moderate drizzle":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Dense drizzle":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Light freezing drizzle":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Dense freezing drizzle":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Slight rain":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Moderate rain":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Heavy rain":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Light freezing rain":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Heavy freezing rain":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Slight snow fall":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Moderate snow fall":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Heavy snow fall":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Snow grains":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Slight rain showers":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Moderate rain showers":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Violent rain showers":"https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Slight snow showers":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Heavy snow showers":"https://images.unsplash.com/photo-1516431883631-67f23b308ad6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",Thunderstorm:"https://images.unsplash.com/photo-1500674425229-f692875b0ab7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Thunderstorm with hail":"https://images.unsplash.com/photo-1500674425229-f692875b0ab7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","Thunderstorm with heavy hail":"https://images.unsplash.com/photo-1500674425229-f692875b0ab7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",Cloudy:"https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"};return t[e]||t.Cloudy}function c(){const e=new Date;t.textContent=e.toLocaleTimeString()}function l(t){e.innerHTML="",t.forEach((t,i)=>{const o=document.createElement("div");if(o.className="weather-card",o.style.animationDelay=.1*i+"s",t&&t.current){const{temperature_2m:e,relative_humidity_2m:a,weather_code:c,visibility:l,wind_speed_10m:m}=t.current,{condition:h,icon:p}=s(c),f=(l/1e3).toFixed(1);o.innerHTML=`\n                    <div class="weather-image">\n                        <img src="${r(h)}" alt="${h}" loading="lazy" onerror="this.style.display='none';">\n                    </div>\n                    <div class="weather-location">\n                        <i data-lucide="map-pin"></i>\n                        ${n[i].name}\n                    </div>\n                    <div class="weather-icon">\n                        <i data-lucide="${p}"></i>\n                    </div>\n                    <div class="weather-temp ${d(e)}">${Math.round(e)}°C</div>\n                    <div class="weather-condition ${u(h)}">${h}</div>\n                    <div class="weather-details">\n                        <div class="weather-detail">\n                            <i data-lucide="droplets"></i>\n                            <div class="weather-detail-value">${a}%</div>\n                            <div class="weather-detail-label">Humidity</div>\n                        </div>\n                        <div class="weather-detail">\n                            <i data-lucide="wind"></i>\n                            <div class="weather-detail-value">${Math.round(m)} km/h</div>\n                            <div class="weather-detail-label">Wind</div>\n                        </div>\n                        <div class="weather-detail">\n                            <i data-lucide="eye"></i>\n                            <div class="weather-detail-value">${f} km</div>\n                            <div class="weather-detail-label">Visibility</div>\n                        </div>\n                    </div>\n                `}else o.innerHTML=`\n                    <div class="weather-location">\n                        <i data-lucide="map-pin"></i>\n                        ${n[i].name}\n                    </div>\n                    <div class="weather-error">\n                        <i data-lucide="alert-triangle"></i>\n                        <p>Could not load weather data.</p>\n                        <p>Please try again later.</p>\n                    </div>\n                `,o.classList.add("error-card");e.appendChild(o)}),lucide.createIcons()}function d(e){return e>=30?"temp-hot":e>=25?"temp-warm":e>=20?"temp-mild":"temp-cool"}function u(e){const t=e.toLowerCase();return t.includes("sun")||t.includes("clear")?"condition-sunny":t.includes("rain")||t.includes("drizzle")?"condition-rainy":t.includes("cloud")?"condition-partly-cloudy":"condition-default"}a(),setInterval(a,3e5),setInterval(c,6e4)}(),function(){const e=document.getElementById("contactForm");if(!e)return;const t=e.querySelector(".form-message"),n=e.querySelector('input[name="name"]'),i=e.querySelector('input[name="email"]'),o=e.querySelector('textarea[name="message"]'),a=e.querySelector('button[type="submit"]');e.addEventListener("submit",function(s){s.preventDefault(),t.classList.remove("show","success","error"),t.textContent="",[n,i,o].forEach(e=>{e.classList.remove("is-valid","is-invalid")});const r=n.value.trim(),c=i.value.trim(),l=o.value.trim();let d=[];if(r?n.classList.add("is-valid"):(d.push("Name is required."),n.classList.add("is-invalid")),c?!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(c)?(d.push("Please enter a valid email address."),i.classList.add("is-invalid")):i.classList.add("is-valid"):(d.push("Email is required."),i.classList.add("is-invalid")),l?o.classList.add("is-valid"):(d.push("Message is required."),o.classList.add("is-invalid")),d.length>0)return t.textContent=d.join(" "),void t.classList.add("error","show");const u=a.textContent;a.textContent="Sending...",a.disabled=!0,setTimeout(()=>{t.textContent="Thank you for your message! We will get back to you soon.",t.classList.add("success","show"),e.reset(),[n,i,o].forEach(e=>{e.classList.remove("is-valid")}),a.textContent=u,a.disabled=!1,setTimeout(()=>{t.classList.remove("show")},5e3)},2e3)})}(),function(){const e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})}(),function(){const t=document.getElementById("donate-now-btn-header");t&&t.addEventListener("click",()=>e("#contact"));const n=document.getElementById("discover-mission-btn");n&&n.addEventListener("click",()=>e("#what-we-do"))}(),function(){const e=document.getElementById("resourceSearch"),t=document.getElementById("clearSearch"),n=document.querySelectorAll(".resource-card");if(!e||!t||!n.length)return;function i(e){const t=e.toLowerCase().trim();n.forEach(e=>{const n=e.querySelector("h3").textContent.toLowerCase(),i=e.querySelector("p").textContent.toLowerCase(),o=e.querySelector(".resource-category").textContent.toLowerCase(),a=n.includes(t)||i.includes(t)||o.includes(t);e.style.display=a||""===t?"block":"none"})}e.addEventListener("input",function(){i(this.value)}),t.addEventListener("click",function(){e.value="",i(""),e.focus()}),e.addEventListener("keydown",function(t){"Escape"===t.key&&(e.value="",i(""))})}(),function(){const t=document.getElementById("take-action-btn"),n=document.getElementById("quizModal"),i=n.querySelector(".close"),o=document.getElementById("quizForm"),a=document.getElementById("quizResults"),s=document.getElementById("restartQuiz");if(console.log("Quiz button found:",t),console.log("Quiz modal found:",n),t){const e=t.getBoundingClientRect();console.log("Button position:",e),console.log("Button center:",Math.floor(e.left+e.width/2),Math.floor(e.top+e.height/2))}if(!t||!n)return;const r=[{question:"What is the primary goal of The Climate Watch?",options:["To promote tourism in Eswatini","To build a sustainable and resilient future through climate action","To develop new technologies","To increase agricultural exports"],correct:1},{question:"Which region of Eswatini is most affected by climate change according to current data?",options:["Hhohho Region","Lubombo Region","Manzini Region","All regions are equally affected"],correct:3},{question:"What type of solutions does The Climate Watch focus on?",options:["Only technological solutions","Only policy changes","Community-driven climate action, advocacy, and education","Only renewable energy projects"],correct:2},{question:"What is one of the key challenges Eswatini faces due to climate change?",options:["Increasing temperatures and erratic rainfall","Too much rainfall","Stable weather patterns","Decreasing temperatures"],correct:0},{question:"How can individuals get involved with The Climate Watch?",options:["Only by donating money","By joining campaigns, volunteering, partnering, or supporting youth leadership","Only through social media","Only by attending events"],correct:1}];let c=0,l=0;function d(){n.classList.remove("show"),document.body.style.overflow="auto",p()}function u(){const e=r[c];o.innerHTML=`\n            <div class="quiz-question">\n                <h3>Question ${c+1} of ${r.length}</h3>\n                <p>${e.question}</p>\n                <div class="quiz-options">\n                    ${e.options.map((e,t)=>`\n                        <label class="quiz-option">\n                            <input type="radio" name="answer" value="${t}">\n                            <span>${e}</span>\n                        </label>\n                    `).join("")}\n                </div>\n                <button type="submit" class="btn btn-primary" id="submitAnswer">Submit Answer</button>\n            </div>\n        `,o.addEventListener("submit",m)}function m(e){e.preventDefault();const t=document.querySelector('input[name="answer"]:checked');if(!t)return;parseInt(t.value)===r[c].correct&&l++,c++,c<r.length?u():h()}function h(){const t=Math.round(l/r.length*100);let n="",i="";t>=80?(n="Excellent! You're a climate champion!",i="trophy"):t>=60?(n="Good job! You have a solid understanding of climate issues.",i="thumbs-up"):(n="Keep learning! Climate action starts with awareness.",i="book-open"),a.innerHTML=`\n            <div class="quiz-results-content">\n                <i data-lucide="${i}" class="results-icon"></i>\n                <h3>Quiz Complete!</h3>\n                <p class="score">Your Score: ${l}/${r.length} (${t}%)</p>\n                <p class="message">${n}</p>\n                <div class="results-actions">\n                    <button class="btn btn-primary" id="shareResults">Share Results</button>\n                    <button class="btn btn-secondary" id="learnMore">Learn More</button>\n                </div>\n            </div>\n        `,o.style.display="none",a.style.display="block",lucide.createIcons(),document.getElementById("shareResults").addEventListener("click",function(){const e=`I scored ${l}/${r.length} on The Climate Watch climate quiz! Take the quiz to test your knowledge: ${window.location.href}`;navigator.share?navigator.share({title:"Climate Quiz Results",text:e,url:window.location.href}):navigator.clipboard.writeText(e).then(()=>{alert("Results copied to clipboard!")})}),document.getElementById("learnMore").addEventListener("click",function(){d(),e("#resources")})}function p(){c=0,l=0,o.style.display="block",a.style.display="none",o.innerHTML=""}t.addEventListener("click",function(e){console.log("Take Action button clicked"),e.preventDefault(),n.classList.add("show"),document.body.style.overflow="hidden",u()}),i.addEventListener("click",d),window.addEventListener("click",function(e){e.target===n&&d()}),s.addEventListener("click",function(){p(),u()})}(),function(){const e=document.getElementById("uploadArea"),t=document.getElementById("fileInput"),n=document.getElementById("fileList"),i=document.getElementById("uploadBtn");if(!e||!t)return;function o(e){e.preventDefault(),e.stopPropagation()}function a(t){e.classList.add("dragover")}function s(t){e.classList.remove("dragover")}function r(e){c(e.dataTransfer.files)}function c(e){[...e].forEach(l)}function l(e){const t=5242880;if(!["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type))return void u("Please upload only image files (JPEG, PNG, GIF) or PDF documents.","error");if(e.size>t)return void u("File size must be less than 5MB.","error");const i=document.createElement("div");if(i.className="file-item",e.type.startsWith("image/")){const t=new FileReader;t.onload=function(t){i.innerHTML=`\n                    <img src="${t.target.result}" alt="${e.name}" class="file-preview">\n                    <div class="file-info">\n                        <p class="file-name">${e.name}</p>\n                        <p class="file-size">${d(e.size)}</p>\n                    </div>\n                    <button class="remove-file" aria-label="Remove ${e.name}">×</button>\n                `,n.appendChild(i)},t.readAsDataURL(e)}else i.innerHTML=`\n                <div class="file-icon">\n                    <i data-lucide="file-text"></i>\n                </div>\n                <div class="file-info">\n                    <p class="file-name">${e.name}</p>\n                    <p class="file-size">${d(e.size)}</p>\n                </div>\n                <button class="remove-file" aria-label="Remove ${e.name}">×</button>\n            `,n.appendChild(i),lucide.createIcons();i.querySelector(".remove-file").addEventListener("click",function(){i.remove()}),u("File uploaded successfully!","success")}function d(e){if(0===e)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,i)).toFixed(2))+" "+n[i]}function u(t,n){const i=document.createElement("div");i.className=`upload-message ${n}`,i.textContent=t,e.appendChild(i),setTimeout(()=>{i.remove()},3e3)}["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,o,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,a,!1)}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,s,!1)}),e.addEventListener("drop",r,!1),e.addEventListener("click",function(){t.click()}),t.addEventListener("change",function(){c(this.files)}),i&&i.addEventListener("click",function(){0!==n.querySelectorAll(".file-item").length?(i.textContent="Uploading...",i.disabled=!0,setTimeout(()=>{u("All files uploaded successfully!","success"),n.innerHTML="",i.textContent="Upload Files",i.disabled=!1},2e3)):u("Please select files to upload.","error")})}()}),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})})}();