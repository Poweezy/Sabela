// Internationalization System
const I18n = {
    currentLang: 'en',
    translations: {
        en: {
            'nav.home': 'Home',
            'nav.what-we-do': 'What We Do',
            'nav.why-it-matters': 'Why It Matters',
            'nav.get-involved': 'Get Involved',
            'nav.contact': 'Contact',
            'hero.title': 'The Climate Change Watch',
            'donate.now': 'Donate Now'
        },
        ss: {
            'nav.home': 'Ekhaya',
            'nav.what-we-do': 'Lokwentako',
            'nav.why-it-matters': 'Kungani Kubalulekile',
            'nav.get-involved': 'Zibandakanye',
            'nav.contact': 'Sitsintsa',
            'hero.title': 'Kubukwa Kwesimo Sezulu',
            'donate.now': 'Nikela Manje'
        }
    },

    init() {
        this.addLanguageSwitcher();
        this.loadLanguage();
    },

    addLanguageSwitcher() {
        const nav = document.querySelector('.nav-links');
        if (!nav) return;

        const langSwitcher = document.createElement('li');
        langSwitcher.innerHTML = `
            <select id="langSelect" class="lang-switcher">
                <option value="en">English</option>
                <option value="ss">siSwati</option>
            </select>
        `;
        nav.appendChild(langSwitcher);

        document.getElementById('langSelect').addEventListener('change', (e) => {
            this.switchLanguage(e.target.value);
        });
    },

    switchLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('language', lang);
        this.translatePage();
    },

    loadLanguage() {
        const saved = localStorage.getItem('language') || 'en';
        this.currentLang = saved;
        const select = document.getElementById('langSelect');
        if (select) select.value = saved;
        this.translatePage();
    },

    translatePage() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.dataset.i18n;
            const translation = this.translations[this.currentLang][key];
            if (translation) el.textContent = translation;
        });
    }
};

document.addEventListener('DOMContentLoaded', () => {
    I18n.init();
});