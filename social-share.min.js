document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".share-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const a=e.dataset.platform,n=encodeURIComponent(window.location.href),o=encodeURIComponent(document.title),i=encodeURIComponent("Check out this amazing environmental initiative!");let s="";switch(a){case"facebook":s=`https://www.facebook.com/sharer/sharer.php?u=${n}`;break;case"twitter":s=`https://twitter.com/intent/tweet?url=${n}&text=${i}`;break;case"linkedin":s=`https://www.linkedin.com/sharing/share-offsite/?url=${n}`;break;case"whatsapp":s=`https://wa.me/?text=${i}%20${n}`;break;case"email":s=`mailto:?subject=${o}&body=${i}%20${n}`;break;default:return}const d=(window.innerWidth-600)/2,c=(window.innerHeight-400)/2;window.open(s,"share-dialog",`width=600,height=400,left=${d},top=${c},scrollbars=yes,resizable=yes`),"undefined"!=typeof gtag&&gtag("event","share",{method:a,content_type:"page",item_id:window.location.pathname})})});const e=document.querySelector(".copy-link-btn");e&&e.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(window.location.href),t(e,"Copied!")}catch(a){const n=document.createElement("textarea");n.value=window.location.href,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),t(e,"Copied!")}});function t(e,t){const a=e.innerHTML;e.innerHTML=`<i class="fas fa-check"></i> ${t}`,e.classList.add("copied"),setTimeout(()=>{e.innerHTML=a,e.classList.remove("copied")},2e3)}document.querySelectorAll(".share-resource-btn").forEach(e=>{e.addEventListener("click",a=>{a.preventDefault();const n=e.dataset.title||document.title,o=e.dataset.url||window.location.href,i=encodeURIComponent(`Check out: ${n}`),s=document.createElement("div");s.className="share-modal",s.innerHTML=`\n        <div class="share-modal-content">\n          <div class="share-modal-header">\n            <h3>Share "${n}"</h3>\n            <button class="share-modal-close">&times;</button>\n          </div>\n          <div class="share-modal-body">\n            <div class="share-options-grid">\n              <button class="share-option" data-platform="facebook" data-url="${o}" data-text="${i}">\n                <i class="fab fa-facebook-f"></i>\n                <span>Facebook</span>\n              </button>\n              <button class="share-option" data-platform="twitter" data-url="${o}" data-text="${i}">\n                <i class="fab fa-twitter"></i>\n                <span>Twitter</span>\n              </button>\n              <button class="share-option" data-platform="linkedin" data-url="${o}" data-text="${i}">\n                <i class="fab fa-linkedin-in"></i>\n                <span>LinkedIn</span>\n              </button>\n              <button class="share-option" data-platform="whatsapp" data-url="${o}" data-text="${i}">\n                <i class="fab fa-whatsapp"></i>\n                <span>WhatsApp</span>\n              </button>\n              <button class="share-option" data-platform="email" data-url="${o}" data-text="${i}" data-title="${encodeURIComponent(n)}">\n                <i class="fas fa-envelope"></i>\n                <span>Email</span>\n              </button>\n              <button class="share-option copy-link-option" data-url="${o}">\n                <i class="fas fa-link"></i>\n                <span>Copy Link</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      `,document.body.appendChild(s);s.querySelector(".share-modal-close").addEventListener("click",()=>{document.body.removeChild(s)});s.querySelectorAll(".share-option").forEach(e=>{e.addEventListener("click",a=>{a.preventDefault();const o=e.dataset.platform,i=e.dataset.url,d=e.dataset.text,c=e.dataset.title;if("copy-link-option"===o)return void navigator.clipboard.writeText(i).then(()=>{t(e,"Copied!")}).catch(()=>{const a=document.createElement("textarea");a.value=i,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t(e,"Copied!")});let r="";switch(o){case"facebook":r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}`;break;case"twitter":r=`https://twitter.com/intent/tweet?url=${encodeURIComponent(i)}&text=${d}`;break;case"linkedin":r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(i)}`;break;case"whatsapp":r=`https://wa.me/?text=${d}%20${encodeURIComponent(i)}`;break;case"email":r=`mailto:?subject=${c}&body=${d}%20${encodeURIComponent(i)}`;break;default:return}const l=(window.innerWidth-600)/2,p=(window.innerHeight-400)/2;window.open(r,"share-dialog",`width=600,height=400,left=${l},top=${p},scrollbars=yes,resizable=yes`),document.body.removeChild(s),"undefined"!=typeof gtag&&gtag("event","share",{method:o,content_type:"resource",item_id:n})})}),s.addEventListener("click",e=>{e.target===s&&document.body.removeChild(s)})})})});